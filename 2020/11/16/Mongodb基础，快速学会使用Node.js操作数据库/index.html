
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mongodb基础，快速学会使用Node.js操作数据库 - Axton&#39;s Blog</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="Axton,Axton-Tang,前端博客,"> 
    <meta name="description" content="一、Mongodb 介绍Mongodb 是一个文档数据库，以文档形式存储数据，格式类似于 JSON
与 Mysql 的特点及选型对照



Mongodb
Mysql



关系类型
非关系型
关系,"> 
    <meta name="author" content="Axton Tang"> 
    <link rel="alternative" href="atom.xml" title="Axton&#39;s Blog" type="application/atom+xml"> 
    <link rel="icon" href="/img/axton-avatar.jpg"> 
    <link href="https://fonts.loli.net/css?family=Roboto+Mono|Rubik&display=swap" rel="stylesheet">
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1429596_nzgqgvnmkjb.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.7.2/animate.min.css">

    
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/codemirror.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/theme/dracula.css">

    
<link rel="stylesheet" href="/css/obsidian.css">

    
<link rel="stylesheet" href="/css/ball-atom.min.css">

    
<link rel="stylesheet" href="/css/iconfont.css">

<meta name="generator" content="Hexo 5.1.1"></head>


<body class="loading">
    <div class="loader">
        <div class="la-ball-atom la-2x">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <span id="config-title" style="display:none">Axton&#39;s Blog</span>
    <div id="loader"></div>
    <div id="single">
    <div class="scrollbar gradient-bg-rev"></div>
<div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <div class="navigation animated fadeIn fast delay-1s">
        <img id="home-icon" class="icon-home" src="/img/axton-avatar.jpg" alt="" data-url="https://www.axton-tang.top">
        <div id="play-icon" title="Play/Pause" class="iconfont icon-play"></div>
        <h3 class="subtitle">Mongodb基础，快速学会使用Node.js操作数据库</h3>
        <div class="social">
            <!--        <div class="like-icon">-->
            <!--            <a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
            <!--        </div>-->
            <div>
                <div class="share">
                    
                        <a href="javascript:;" class="iconfont icon-share1"></a>
                        <div class="share-component-cc" data-disabled="facebook,douban,linkedin,diandian,tencent,google"></div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="section">
        
<div class=article-header-wrapper>
    <div class="article-header">
        <div class="article-cover animated fadeIn" style="
            animation-delay: 600ms;
            animation-duration: 1.2s;
            background-image: 
                radial-gradient(ellipse closest-side, rgba(0, 0, 0, 0.65), #100e17),
                url(/img/cover.jpg) ">
        </div>
        <div class="else">
            <p class="animated fadeInDown">
                
                <a href="/categories/Mongodb"><b>「
                    </b>MONGODB<b> 」</b></a>
                
                十一月 16, 2020
            </p>
            <h3 class="post-title animated fadeInDown"><a href="/2020/11/16/Mongodb%E5%9F%BA%E7%A1%80%EF%BC%8C%E5%BF%AB%E9%80%9F%E5%AD%A6%E4%BC%9A%E4%BD%BF%E7%94%A8Node.js%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93/" title="Mongodb基础，快速学会使用Node.js操作数据库" class="">Mongodb基础，快速学会使用Node.js操作数据库</a>
            </h3>
            
            <p class="post-count animated fadeInDown">
                
                <span>
                    <b class="iconfont icon-text2"></b> <i>文章字数</i>
                    13k
                </span>
                
                
                <span>
                    <b class="iconfont icon-timer__s"></b> <i>阅读约需</i>
                    12 mins.
                </span>
                
                
                <span id="/2020/11/16/Mongodb基础，快速学会使用Node.js操作数据库/" class="leancloud_visitors" data-flag-title="Mongodb基础，快速学会使用Node.js操作数据库">
                    <b class="iconfont icon-read"></b> <i>阅读次数</i>
                    <span class="leancloud-visitors-count">1000000</span>
                </span>
                
                
            </p>
            
            
            <ul class="animated fadeInDown post-tags-list" itemprop="keywords"><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/Mongodb/" rel="tag">Mongodb</a></li></ul>
            
        </div>
    </div>
</div>

<div class="screen-gradient-after">
    <div class="screen-gradient-content">
        <div class="screen-gradient-content-inside">
            <div class="bold-underline-links screen-gradient-sponsor">
                <p>
                    <span class="animated fadeIn delay-1s"></span>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="article">
    <div class='main'>
        <div class="content markdown animated fadeIn">
            <h2 id="一、Mongodb-介绍"><a href="#一、Mongodb-介绍" class="headerlink" title="一、Mongodb 介绍"></a>一、Mongodb 介绍</h2><p><strong><code>Mongodb</code> 是一个文档数据库，以文档形式存储数据，格式类似于 <code>JSON</code></strong></p>
<h3 id="与-Mysql-的特点及选型对照"><a href="#与-Mysql-的特点及选型对照" class="headerlink" title="与 Mysql 的特点及选型对照"></a>与 Mysql 的特点及选型对照</h3><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">Mongodb</th>
<th align="center">Mysql</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong><em>关系类型</em></strong></td>
<td align="center">非关系型</td>
<td align="center">关系型</td>
</tr>
<tr>
<td align="center"><strong><em>存储类型</em></strong></td>
<td align="center">文档存储（类似于写 Word ）</td>
<td align="center">表格存储 （类似于写 Excle）</td>
</tr>
<tr>
<td align="center"><strong><em>操作类型</em></strong></td>
<td align="center">NoSQL 操作 （不需要写 sql 语句）</td>
<td align="center">SQL 操作</td>
</tr>
<tr>
<td align="center"><strong><em>选型对照</em></strong></td>
<td align="center">适合存储格式比较<strong>松散</strong>的信息，如“爬虫”下来的数据</td>
<td align="center">适合存储格式比较<strong>规整</strong>的信息</td>
</tr>
</tbody></table>
<p><strong>说明：</strong>并不是说在真实项目中，两种数据库只能选其一， 二者是可以同时使用的。对于用户信息表等规整信息可以采用 <code>Mysql</code> 数据库存储，而对于网页中类似博客内容等大段的富文本信息（同时包含文本、视频、图片等），放到 <code>Mysql</code> 数据库中的一个字段中存储就不太合适了，这段博客内容就可以采用 <code>Mongodb</code> 来存储。</p>
<h2 id="二、Mongodb-及-Compass-安装"><a href="#二、Mongodb-及-Compass-安装" class="headerlink" title="二、Mongodb 及 Compass 安装"></a>二、Mongodb 及 Compass 安装</h2><p>网上安装的资料很多，我在这里就不在重复了，大家可以根据以下参考博客进行安装</p>
<h3 id="Mongodb-安装"><a href="#Mongodb-安装" class="headerlink" title="Mongodb 安装"></a>Mongodb 安装</h3><p><a target="_blank" rel="noopener" href="https://www.runoob.com/mongodb/mongodb-window-install.html">Window 平台安装链接</a></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/mongodb/mongodb-osx-install.html">Mac OS 平台安装链接 （推荐使用 brew 进行安装）</a> </p>
<p>说明：在我安装后默认的运行了 <code>Mongodb</code> 服务器，以及连接上了 <code>Mongodb</code>， 可以直接通过命令行进行操作了。如果你还连接不上 <code>Mongodb</code> ，请参考上面安装连接中的配置。</p>
<h3 id="Mongodb-Compass-安装"><a href="#Mongodb-Compass-安装" class="headerlink" title="Mongodb Compass 安装"></a>Mongodb Compass 安装</h3><p>Mongodb Compass 是官方推荐的一款可视化工具，可以方便直观的进行数据的浏览和操纵</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ca1e722b6788">安装链接</a></p>
<h2 id="三、重要概念"><a href="#三、重要概念" class="headerlink" title="三、重要概念"></a>三、重要概念</h2><h3 id="1、和-Mysql-的差异"><a href="#1、和-Mysql-的差异" class="headerlink" title="1、和 Mysql 的差异"></a>1、和 Mysql 的差异</h3><p>对于关系型数据库，使用时通常是先创建数据库，再创建表，然后对记录的增删改查</p>
<p>但在 <code>Mongodb</code> 中这些名词上有些差异，操作步骤如下：</p>
<ul>
<li>创建一个数据库 （<code>database</code>） – 和 <code>Mysql</code> 相同</li>
<li>创建集合 （<code>collection</code>） – 对应 <code>Mysql</code> 中的表</li>
<li>对文档 （<code>document</code>） 的增删改查  –  对应 <code>Mysql</code> 中记录的增删改查</li>
</ul>
<h3 id="2、BSON"><a href="#2、BSON" class="headerlink" title="2、BSON"></a>2、BSON</h3><ul>
<li><code>Mongodb</code> 的文档使用的格式是 <code>BSON</code></li>
<li><code>BSON</code> = Binary <code>JSON</code> ，是二进制类型的 <code>JSON</code></li>
</ul>
<h2 id="四、使用-Compass-操作-Mongodb"><a href="#四、使用-Compass-操作-Mongodb" class="headerlink" title="四、使用 Compass 操作 Mongodb"></a>四、使用 Compass 操作 Mongodb</h2><p>1、打开后的界面如图所示，点击 “CONNECT” 进行连接</p>
<p><img src="https://upyun.axton-tang.top/mongodb/Snipaste_2020-11-16_14-38-09.jpg"></p>
<p>2、新安装的 <code>Mongodb</code> 默认带了三个数据库； 点击 “CREATE DATABASE” 进行创建数据库</p>
<p><img src="https://upyun.axton-tang.top/mongodb/Snipaste_2020-11-16_14-58-39.jpg"></p>
<p>3、创建数据库和集合</p>
<p><img src="https://upyun.axton-tang.top/mongodb/Snipaste_2020-11-16_14-59-07.jpg"></p>
<p>4、点击 “ADD DATA” 可以增加文档</p>
<p><img src="https://upyun.axton-tang.top/mongodb/Snipaste_2020-11-16_15-02-01.jpg"></p>
<p>5、文档的格式如下图 ：</p>
<img src="https://upyun.axton-tang.top/mongodb/Snipaste_2020-11-16_15-04-28.jpg" style="zoom: 80%;" />

<p>6、对文档的查找、修改和删除</p>
<p><img src="https://upyun.axton-tang.top/mongodb/Snipaste_2020-11-16_15-05-56.jpg"></p>
<p>注：查找时输入的数据也是类似于 <code>JSON</code> 的格式</p>
<h2 id="五、使用命令行操作-Mongodb"><a href="#五、使用命令行操作-Mongodb" class="headerlink" title="五、使用命令行操作 Mongodb"></a>五、使用命令行操作 Mongodb</h2><p>**打开 Mongodb 目录下 bin/mongo.exe **</p>
<p>注：dbName、collName 等 请改为自己创建的数据库或集合的名字</p>
<h3 id="1、查看操作"><a href="#1、查看操作" class="headerlink" title="1、查看操作"></a>1、查看操作</h3><pre><code class="shell"># 查看有哪些数据库
show dbs

# 创建或进入数据库 （当数据库不存在即创建）
use dbName

# 查看有哪些集合
show collections</code></pre>
<h3 id="2、创建集合-向集合中插入文档"><a href="#2、创建集合-向集合中插入文档" class="headerlink" title="2、创建集合  / 向集合中插入文档"></a>2、创建集合  / 向集合中插入文档</h3><pre><code class="shell"># 可以直接向集合插入数据，对不存在的集合将会创建
db.collName.insert(&#123;&quot;name&quot;:&quot;Axton&quot;, &quot;age&quot;:20&#125;) </code></pre>
<h3 id="3、显示集合中的文档"><a href="#3、显示集合中的文档" class="headerlink" title="3、显示集合中的文档"></a>3、显示集合中的文档</h3><pre><code class="shell"># 显示集合中全部文档
db.collName.find()

# 显示集合中特定文档
db.collName.find(&#123; &quot;name&quot;:&quot;Axton&quot; &#125;)

# 排序，按 ID 倒序排序
db.collName.find().sort(&#123;_id:-1&#125;)</code></pre>
<h3 id="4、更新文档"><a href="#4、更新文档" class="headerlink" title="4、更新文档"></a>4、更新文档</h3><pre><code class="shell">db.collName.update(&#123;&quot;name&quot;:&quot;Axton&quot;, $set:&#123;&quot;name&quot;: &quot;Axton2&quot;&#125;&#125;)</code></pre>
<h3 id="5、删除文档"><a href="#5、删除文档" class="headerlink" title="5、删除文档"></a>5、删除文档</h3><pre><code class="shell">db.collName.remove(&#123;&quot;name&quot;: &quot;Axton&quot;&#125;)</code></pre>
<h2 id="六、Node-js-中使用-mongodb-插件连接数据库"><a href="#六、Node-js-中使用-mongodb-插件连接数据库" class="headerlink" title="六、Node.js 中使用 mongodb 插件连接数据库"></a>六、Node.js 中使用 mongodb 插件连接数据库</h2><h3 id="1、初始化环境"><a href="#1、初始化环境" class="headerlink" title="1、初始化环境"></a>1、初始化环境</h3><pre><code class="shell"># 初始化 node.js 环境
npm init -y

# 安装 mongodb 模块
npm i mongodb --save</code></pre>
<h3 id="2、连接到-Mongodb"><a href="#2、连接到-Mongodb" class="headerlink" title="2、连接到 Mongodb"></a>2、连接到 Mongodb</h3><pre><code class="js">const MongoClient = require(&#39;mongodb&#39;).MongoClient

const url = &#39;mongodb://localhost:27017&#39;        // 默认端口号为 27017 ，如修改过请自行更改
const dbName = &#39;mydb&#39;        // 需要连接的数据库名字

MongoClient.connect(
  url,
  &#123;
    // 配置 （默认写上就好）
    useUnifiedTopology: true
  &#125;,
  (err, client) =&gt; &#123;
    if (err) &#123;
      console.error(&#39;mongodn connect error&#39;, err)
      return
    &#125;

    console.log(&#39;mongodb connect success&#39;)

    // 切换到数据库
    const db = client.db(dbName)

    // 关闭连接
    client.close()
  &#125;
)</code></pre>
<h3 id="3、文档（Document）的操作"><a href="#3、文档（Document）的操作" class="headerlink" title="3、文档（Document）的操作"></a>3、文档（Document）的操作</h3><h4 id="查询文档"><a href="#查询文档" class="headerlink" title="查询文档"></a>查询文档</h4><pre><code class="js">const MongoClient = require(&#39;mongodb&#39;).MongoClient

const url = &#39;mongodb://localhost:27017&#39;
const dbName = &#39;mydb&#39;

MongoClient.connect(
  url, 
  &#123;
    useUnifiedTopology: true
  &#125;,
  (err, client) =&gt; &#123;
    if (err) &#123;
      console.error(&#39;mongodn connect error&#39;, err)
      return
    &#125;
    console.log(&#39;mongodb connect success&#39;)
    const db = client.db(dbName)

    // 使用集合
    const usersCollection = db.collection(&#39;students&#39;)

    // ------- 文档的操作代码写在此部分，之后将不再包含连接部分代码 -------
    // 查询文档
    usersCollection.find(&#123;    // find() 内不写内容则为查询全部文档
        &quot;name&quot; : &quot;Axton&quot;
    &#125;).toArray((err, res) =&gt; &#123;
      if (err) &#123;
        console.error(err)
        return
      &#125;
      console.log(res)

      // find() 为异步操作，为了使查询完后在关闭数据，所以放至此位置
      client.close()
    &#125;)
    // -------------------------------------------------------------
  &#125;
)</code></pre>
<h4 id="插入文档"><a href="#插入文档" class="headerlink" title="插入文档"></a>插入文档</h4><pre><code class="js">// 插入一条数据， 插入多条可以选择 insertMany()
usersCollection.insertOne(&#123;
  name: &#39;Jack&#39;,
  sex: &#39;男&#39;,
  age: 21
&#125;, (err, res) =&gt; &#123;
  if (err) &#123;
    console.error(err)
    return
  &#125;
  console.log(res)
  client.close()
&#125;)</code></pre>
<h4 id="更新文档"><a href="#更新文档" class="headerlink" title="更新文档"></a>更新文档</h4><pre><code class="js">// 更新一条数据， 更新多条可以选择 updateMany()
usersCollection.updateOne(
  &#123;name: &#39;Jack&#39;&#125;,   // 查询条件
  &#123;$set: &#123;info: &#39;女装&#39;&#125;&#125;,   // 更新的内容
   (err, res) =&gt; &#123;
     if (err) &#123;
       console.error(err)
       return
     &#125;
     console.log(res)
     client.close()
  &#125;
)</code></pre>
<h4 id="删除文档"><a href="#删除文档" class="headerlink" title="删除文档"></a>删除文档</h4><pre><code class="js">// 删除一条数据， 删除多条可以选择 deleteMany()
usersCollection.deleteOne(&#123;
    name: &#39;Jack&#39;
&#125;, (err, res) =&gt; &#123;
    if (err) &#123;
        console.error(err)
        return
    &#125;
    console.log(res)
    client.close()
&#125;)</code></pre>
<h3 id="4、说明"><a href="#4、说明" class="headerlink" title="4、说明"></a>4、说明</h3><p><code>mongodb</code> 是偏底层一点的插件，此处学习使用此插件是为了让大家了解连接 <code>mongodb</code> 的一些原理。在日常中，为了利于项目开发，通常使用 <strong><code>mongoose</code></strong> 插件</p>
<h2 id="七、Node-js-中使用-mongoose-插件连接数据库"><a href="#七、Node-js-中使用-mongoose-插件连接数据库" class="headerlink" title="七、Node.js 中使用 mongoose 插件连接数据库"></a>七、Node.js 中使用 mongoose 插件连接数据库</h2><h3 id="1、说明"><a href="#1、说明" class="headerlink" title="1、说明"></a>1、说明</h3><p>由于 <code>mongodb</code> 的数据格式过于灵活，容易导致多人开发时数据格式出错，使用 <code>mongoose</code> 可以更加规范的使用数据.</p>
<p><strong>重要名词和操作</strong></p>
<ul>
<li>Schema 定义数据格式的规范</li>
<li>以 Model 规范 Collection</li>
<li>规范数据操作的 API</li>
</ul>
<h3 id="2、初始化环境"><a href="#2、初始化环境" class="headerlink" title="2、初始化环境"></a>2、初始化环境</h3><p><strong>安装 mongoose 插件</strong></p>
<pre><code class="shell">npm i mongoose --save</code></pre>
<p><strong>目录结构</strong></p>
<pre><code>mongoose-test
├── package-lock.json
├── package.json
├── node_modules
└── src
    ├── db.js
    ├── models
    │      └── Student.js
    └── test
              └── student.js</code></pre>
<h3 id="3、创建连接服务"><a href="#3、创建连接服务" class="headerlink" title="3、创建连接服务"></a>3、创建连接服务</h3><p><strong><em>db.js</em></strong></p>
<pre><code class="js">const mongoose = require(&#39;mongoose&#39;)

const url = &#39;mongodb://localhost:27017&#39;
const dbName = &#39;myblog&#39;

mongoose.connect(`$&#123;url&#125;/$&#123;dbName&#125;`, &#123;
  useUnifiedTopology: true,
  useNewUrlParser: true
&#125;)

const db = mongoose.connection    // 将连接对象赋给 db

// 发送错误
db.on(&#39;error&#39;, err =&gt; &#123;
  console.error(err)
&#125;)

// 连接成功
db.on(&#39;open&#39;, () =&gt; &#123;
  console.log(&#39;success!&#39;)
&#125;)

module.exports = mongoose</code></pre>
<h3 id="4、定义-Schema-规范和创建模型"><a href="#4、定义-Schema-规范和创建模型" class="headerlink" title="4、定义 Schema 规范和创建模型"></a>4、定义 Schema 规范和创建模型</h3><p><strong><em>models/Students.js</em></strong></p>
<pre><code class="js">// 对应 students 集合

const mongoose = require(&#39;../db&#39;)

// 用 Schema 定义数据规范
const StudentSchema = mongoose.Schema(&#123;
  name: &#123;
    type: String,
    required: true,
    unique: true
  &#125;,
  sex: String,
  age: Number
&#125;, &#123;
  timestamps: true  // 时间戳， 在插入、更新数据后将会加上相应的时间数据
  // 在每一条文档中加入 createdAt 和 updatedAt
&#125;)

// Model 对于 Collection
const Student = mongoose.model(&#39;student&#39;, StudentSchema)

module.exports = Student</code></pre>
<h3 id="5、文档（Document）的操作"><a href="#5、文档（Document）的操作" class="headerlink" title="5、文档（Document）的操作"></a>5、文档（Document）的操作</h3><p><strong><em>test/students.js</em></strong></p>
<h4 id="查询文档-1"><a href="#查询文档-1" class="headerlink" title="查询文档"></a>查询文档</h4><pre><code class="js">const Student = require(&#39;../models/Student&#39;)

// 自执行的异步函数
!(async () =&gt; &#123;

  // 查询文档
  const res = await Student.find(&#123;
    name: &#39;Axton&#39;
  &#125;)

  // 用正则表达式模糊查询文档
  const res2 = await Student.find(&#123;
    name: /A/
  &#125;)

  // 根据 ID 查询单条文档
  const res3 = await Student.findById(&#39;5fb2247e6469170600f02551&#39;)

&#125;)()</code></pre>
<h4 id="插入文档-1"><a href="#插入文档-1" class="headerlink" title="插入文档"></a>插入文档</h4><pre><code class="js">const Student = require(&#39;../models/Student&#39;)

!(async () =&gt; &#123;

  // 插入文档
  const res = await Student.create(&#123;
    name: &#39;Jack&#39;,
    age: 21,
    sex: &#39;男&#39;
  &#125;)

&#125;)()</code></pre>
<h4 id="更新文档-1"><a href="#更新文档-1" class="headerlink" title="更新文档"></a>更新文档</h4><pre><code class="js">const Student = require(&#39;../models/Student&#39;)

!(async () =&gt; &#123;

  // 更新文档
  const res = await Student.findOneAndUpdate(
    &#123;name: &#39;Jack&#39;&#125;,   // 查询的条件
    &#123;sex: &#39;女&#39;&#125;,
    &#123;
      new: true  // 返回修改之后的内容，默认为 fasle
    &#125;
  )

&#125;)()</code></pre>
<h4 id="删除文档-1"><a href="#删除文档-1" class="headerlink" title="删除文档"></a>删除文档</h4><pre><code class="js">const Student = require(&#39;../models/Student&#39;)

!(async () =&gt; &#123;

  // 删除文档
  const res = await Student.findOneAndDelete(&#123;
    name: &#39;Jack&#39;
  &#125;)

&#125;)()</code></pre>
<h2 id="八、写在文末"><a href="#八、写在文末" class="headerlink" title="八、写在文末"></a>八、写在文末</h2><p>本文只是把 <code>mongodb</code> 和 <code>node.js</code> 连接 <code>mongodb</code> 等基础操作进行了整理和归纳，能用在常用的一些场景中。对于更高级的一些操作可以自行参考官方文档。如果发现本文有错误的地方或者写的不好的地方请在评论区指出。</p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls"
                data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
            <ul id="audio-list" style="display:none">
                
                
                <li title='0' data-url='/statics/wuwen.m4a'></li>
                
                    
            </ul>
            
            
            
            <div id="vcomments"></div>
            
        </div>
        <div class="sidebar">
            <div class="box animated fadeInRight">
                <div class="subbox">
                    <img src="https://upyun.axton-tang.top/axton-avatar.jpg" height=300 width=300></img>
                    <p>Axton Tang</p>
                    <span>I hope what you strive for will be as you wish in the end!</span>
                    <dl>
                        <dd><a href="https://github.com/Axton-Tang" target="_blank"><span class=" iconfont icon-github"></span></a></dd>
                        <dd><a href="https://www.zhihu.com/people/chen-zao-38-10" target="_blank"><span
                                    class=" iconfont icon-zhihu"></span></a></dd>
                        <dd><a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=873948360&website=www.oicqzone.com" target="_blank"><span
                                    class=" iconfont icon-qq"></span></a></dd>
                    </dl>
                </div>
                <ul>
                    <li><a href="/">4 <p>文章</p></a></li>
                    <li><a href="/categories">4 <p>分类</p></a></li>
                    <li><a href="/tags">4 <p>标签</p></a></li>
                </ul>
            </div>
            
            
            
            <div class="box sticky animated fadeInRight faster">
                <div id="toc" class="subbox">
                    <h4>目录</h4>
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Mongodb-%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">一、Mongodb 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8E-Mysql-%E7%9A%84%E7%89%B9%E7%82%B9%E5%8F%8A%E9%80%89%E5%9E%8B%E5%AF%B9%E7%85%A7"><span class="toc-number">1.1.</span> <span class="toc-text">与 Mysql 的特点及选型对照</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Mongodb-%E5%8F%8A-Compass-%E5%AE%89%E8%A3%85"><span class="toc-number">2.</span> <span class="toc-text">二、Mongodb 及 Compass 安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Mongodb-%E5%AE%89%E8%A3%85"><span class="toc-number">2.1.</span> <span class="toc-text">Mongodb 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mongodb-Compass-%E5%AE%89%E8%A3%85"><span class="toc-number">2.2.</span> <span class="toc-text">Mongodb Compass 安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5"><span class="toc-number">3.</span> <span class="toc-text">三、重要概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%92%8C-Mysql-%E7%9A%84%E5%B7%AE%E5%BC%82"><span class="toc-number">3.1.</span> <span class="toc-text">1、和 Mysql 的差异</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81BSON"><span class="toc-number">3.2.</span> <span class="toc-text">2、BSON</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E4%BD%BF%E7%94%A8-Compass-%E6%93%8D%E4%BD%9C-Mongodb"><span class="toc-number">4.</span> <span class="toc-text">四、使用 Compass 操作 Mongodb</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%93%8D%E4%BD%9C-Mongodb"><span class="toc-number">5.</span> <span class="toc-text">五、使用命令行操作 Mongodb</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E6%9F%A5%E7%9C%8B%E6%93%8D%E4%BD%9C"><span class="toc-number">5.1.</span> <span class="toc-text">1、查看操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%88%9B%E5%BB%BA%E9%9B%86%E5%90%88-%E5%90%91%E9%9B%86%E5%90%88%E4%B8%AD%E6%8F%92%E5%85%A5%E6%96%87%E6%A1%A3"><span class="toc-number">5.2.</span> <span class="toc-text">2、创建集合  &#x2F; 向集合中插入文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E6%98%BE%E7%A4%BA%E9%9B%86%E5%90%88%E4%B8%AD%E7%9A%84%E6%96%87%E6%A1%A3"><span class="toc-number">5.3.</span> <span class="toc-text">3、显示集合中的文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E6%9B%B4%E6%96%B0%E6%96%87%E6%A1%A3"><span class="toc-number">5.4.</span> <span class="toc-text">4、更新文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E5%88%A0%E9%99%A4%E6%96%87%E6%A1%A3"><span class="toc-number">5.5.</span> <span class="toc-text">5、删除文档</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81Node-js-%E4%B8%AD%E4%BD%BF%E7%94%A8-mongodb-%E6%8F%92%E4%BB%B6%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">6.</span> <span class="toc-text">六、Node.js 中使用 mongodb 插件连接数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E7%8E%AF%E5%A2%83"><span class="toc-number">6.1.</span> <span class="toc-text">1、初始化环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E8%BF%9E%E6%8E%A5%E5%88%B0-Mongodb"><span class="toc-number">6.2.</span> <span class="toc-text">2、连接到 Mongodb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E6%96%87%E6%A1%A3%EF%BC%88Document%EF%BC%89%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">6.3.</span> <span class="toc-text">3、文档（Document）的操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E8%AF%B4%E6%98%8E"><span class="toc-number">6.4.</span> <span class="toc-text">4、说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81Node-js-%E4%B8%AD%E4%BD%BF%E7%94%A8-mongoose-%E6%8F%92%E4%BB%B6%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">7.</span> <span class="toc-text">七、Node.js 中使用 mongoose 插件连接数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%AF%B4%E6%98%8E"><span class="toc-number">7.1.</span> <span class="toc-text">1、说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E7%8E%AF%E5%A2%83"><span class="toc-number">7.2.</span> <span class="toc-text">2、初始化环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%88%9B%E5%BB%BA%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1"><span class="toc-number">7.3.</span> <span class="toc-text">3、创建连接服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%AE%9A%E4%B9%89-Schema-%E8%A7%84%E8%8C%83%E5%92%8C%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9E%8B"><span class="toc-number">7.4.</span> <span class="toc-text">4、定义 Schema 规范和创建模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E6%96%87%E6%A1%A3%EF%BC%88Document%EF%BC%89%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">7.5.</span> <span class="toc-text">5、文档（Document）的操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E5%86%99%E5%9C%A8%E6%96%87%E6%9C%AB"><span class="toc-number">8.</span> <span class="toc-text">八、写在文末</span></a></li></ol>
                </div>
            </div>
            
            
        </div>
    </div>
</div>

    </div>
</div>
    <div id="back-to-top" class="animated fadeIn faster">
        <div class="flow"></div>
        <span class="percentage animated fadeIn faster">0%</span>
        <span class="iconfont icon-top02 animated fadeIn faster"></span>
    </div>
</body>
<footer>
    <p class="copyright" id="copyright">
        &copy; 2020
        <span class="gradient-text">
            Axton Tang
        </span>.
        Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
        Theme
        <span class="gradient-text">
            <a href="https://github.com/TriDiamond/hexo-theme-obsidian" title="Obsidian" target="_blank" rel="noopener">Obsidian</a>
        </span>
        <small><a href="https://github.com/TriDiamond/hexo-theme-obsidian/blob/master/CHANGELOG.md" title="v1.4.4" target="_blank" rel="noopener">v1.4.4</a></small>
        <br><a target="_blank" rel="noopener" href="http://www.beian.miit.gov.cn">湘ICP备20009728号</a>
</p>

</footer>

<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script>
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX", "TeX"],
      linebreaks: {
        automatic: true
      },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [
        ["$", "$"],
        ["\\(", "\\)"]
      ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      noUndefined: {
        attributes: {
          mathcolor: "red",
          mathbackground: "#FFEEEE",
          mathsize: "90%"
        }
      },
      Macros: {
        href: "{}"
      }
    },
    messageStyle: "none"
  });
</script>
<script>
  function initialMathJax() {
    MathJax.Hub.Queue(function () {
      var all = MathJax.Hub.getAllJax(),
        i;
      // console.log(all);
      for (i = 0; i < all.length; i += 1) {
        console.log(all[i].SourceElement().parentNode)
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  }

  function reprocessMathJax() {
    if (typeof MathJax !== 'undefined') {
      MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
    }
  }
</script>


 
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/obsidian.js"></script>
<script src="/js/jquery.truncate.js"></script>
<script src="/js/search.js"></script>
 
<script src="//cdn.bootcss.com/typed.js/2.0.10/typed.min.js"></script>
 
<script src="//cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>
 
<script src="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>


<script src="https://cdn.bootcss.com/codemirror/5.48.4/codemirror.min.js"></script>
 
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/javascript/javascript.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/css/css.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/xml/xml.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/htmlmixed/htmlmixed.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/clike/clike.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/php/php.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/shell/shell.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/python/python.min.js"></script>
   
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css">


<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="//www.googletagmanager.com/gtag/js?id=UA-149874671-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'UA-149874671-1');
</script>
 

<script>
  function initialTyped() {
    var typedTextEl = $('.typed-text');
    if (typedTextEl && typedTextEl.length > 0) {
      var typed = new Typed('.typed-text', {
        strings: ['I hope what you strive for will be as you wish in the end!', '希望你所拼命争取的，最后都能如你所愿！'],
        typeSpeed: 90,
        loop: true,
        loopCount: Infinity,
        backSpeed: 20,
      });
    }
  }

  if ($('.article-header') && $('.article-header').length) {
    $(document).ready(function () {
      initialTyped();
    });
  }
</script>

 
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
  var valine = new Valine();

  function initValine(path) {
    if (!path) path = window.location.pathname;
    let language = 'zh-CN';
    if (!language) {
      language = 'en';
    } else {
      language = language.toLowerCase();
    }
    valine.init({
      el: '#vcomments',
      appId: 'QHCOIEBlyjBUMAjaE5ilzafk-gzGzoHsz',
      appKey: 'ggeGwz8ypB9uiAIYSRH5T0PF',
      notify: 'false',
      verify: 'false',
      avatar: 'mp',
      placeholder: 'Leave your throughs behind~',
      visitor: 'true',
      path: path,
      lang: language,
    });
  }

  $(document).ready(function () {
    initValine();
  });
</script>


</html>
